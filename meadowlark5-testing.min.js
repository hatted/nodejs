var express=require("express"),app=express();app.set("port",process.env.PORT||3e3);var handlebars=require("express-handlebars").create({defaultLayout:"main"});app.engine("handlebars",handlebars.engine),app.set("view engine","handlebars"),app.use(express["static"](__dirname+"/public")),app.use(function(e,t,r){t.locals.showTests="production"!==app.get("env")&&"1"===e.query.test,r()});var fortunes=["line 1","sentence b","row c","d"];app.get("/",function(e,t){t.render("home")}),app.get("/about",function(e,t){var r=fortunes[Math.floor(Math.random()*fortunes.length)];t.render("about",{fortune:r,pageTestScript:"/qa/tests-about.js"})}),app.use(function(e,t){t.status(404),t.render("404")}),app.use(function(e,t){console.error(err.stack),t.status(500),t.render("500")}),app.listen(app.get("port"),function(){console.log("express started on http://localhost:"+app.get("port"))});